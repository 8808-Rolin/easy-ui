(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8c3597a"],{"0418":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"warp"},[a("div",{staticClass:"logo"},[a("router-link",{attrs:{to:{path:"/"},title:"Easy社团"}},[t._v("Easy社团")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.existUser,expression:"existUser"}],staticClass:"user"},[a("div",{staticClass:"profile",on:{click:t.toMyHomePage}},[a("img",{attrs:{src:t.headImage}})]),a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[a("div",{staticStyle:{color:"#000000",cursor:"pointer"}},[t._v(t._s(t.user.userName))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){t.centerDialogVisible=!0}}},[t._v("发送邮件")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.toMyHomePage(e)}}},[t._v("个人空间")]),a("el-dropdown-item",{nativeOn:{click:function(e){return t.logout(e)}}},[t._v("退出登录")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.existUser,expression:"!existUser"}],staticClass:"login_and_register"},[a("router-link",{attrs:{to:{path:"/login"}}},[t._v("登录")]),a("router-link",{attrs:{to:{path:"/register"}}},[t._v("注册")])],1)]),a("el-dialog",{attrs:{title:"发送邮件",visible:t.centerDialogVisible,width:"61.8%",center:"","append-to-body":!0},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("span",[a("div",{staticClass:"form"},[a("div",{staticClass:"title"},[a("label",[t._v("邮件标题：")]),a("el-input",{attrs:{maxlength:"120","show-word-limit":"",placeholder:"请输入邮件标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("div",{staticClass:"content"},[a("el-input",{attrs:{type:"textarea",maxlength:"255",rows:10,placeholder:"请输入私信内容","show-word-limit":""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),a("div",{staticClass:"to_man"},[a("div",{staticClass:"to_man_tag"},[a("label",[t._v("收件人：")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:""!=t.toManTag,expression:"toManTag != ''"}],attrs:{closable:"","disable-transitions":!1,size:"small"},on:{close:function(e){return t.removeToManTag(t.toManTag)}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.toManTag.tag)+"\n\t\t\t\t\t\t")])],1),a("div",{staticClass:"search_man"},[a("el-input",{attrs:{placeholder:"请输入收件人的名称/昵称/电话号码/学号..."},on:{input:t.findUser},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("div",t._l(t.dynamicTags,function(e,i){return a("el-tag",{key:i,attrs:{"disable-transitions":!1,size:"medium"},on:{click:function(a){return t.handleClose(e)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.tag)+"\n\t\t\t\t\t\t\t")])}),1)],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sendMail}},[t._v("确 定")])],1)])],1)},s=[],n=a("cebc"),o=(a("7f7f"),a("0cd8"),a("57e7"),a("e988")),r=a("cadb"),c=a("2f62"),l=a("31e1"),d={name:"Header",data:function(){return{centerDialogVisible:!1,title:"",input:"",keyword:"",dynamicTags:[],inputVisible:!1,inputValue:"",toManTag:"",timeout:null,message:null}},methods:{logout:function(){console.log("退出登录处理....."),this.$store.commit("removeUser",""),o["a"].removeItem("token"),this.$store.commit("updateExistUser",!1),this.$router.push({path:"/login"})},checkLogin:function(){var t=this,e=o["a"].getItem("token");if(null!==e){this.$store.commit("updateToken",e.token),this.$store.commit("updateUid",e.uid);var a=this.$store.state.message.user;""===a.headImage||void 0===a.headImage||null===a.headImage?this.$api.getCommonPersonInformation({uid:e.uid}).then(function(e){e.data.data.code||(t.$store.commit("addUser",e.data.data.user),t.$store.commit("updateExistUser",!0),t.$store.commit("addOlineTime",r["a"].formatDate))}):this.$store.commit("updateExistUser",!0)}else this.$store.commit("updateExistUser",!1)},toMyHomePage:function(){this.$router.push({name:"Me",params:{uid:this.uid}})},handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1),""!=this.toManTag&&this.dynamicTags.push(this.toManTag),this.toManTag=t},removeToManTag:function(t){this.toManTag="",this.dynamicTags.push(t)},findUser:function(){var t=this,e=this.keyword;clearTimeout(this.timeout),this.timeout=setTimeout(function(){console.log(e,"====="),""!=e&&t.$api.findUser({keyword:e}).then(function(e){var a=e.data.data.msg.reduce(function(t,e){var a={uid:e.uid,tag:"".concat(e.name,"(").concat(e.student_number,")")};return t.push(a),t},[]);t.dynamicTags=a})},500)},sendMail:function(){var t=this;null!==this.message&&this.message.close();var e=0,a=0,i=this.uid,s=this.toManTag.uid,n=this.title,o=this.input,r=void 0!==s&&""!==n&&""!==o;r?this.$api.sendEmail({isSystem:e,mailType:a,fromuid:i,touid:s,title:n,content:o}).then(function(e){e.data.data.code>-1?(t.input="",t.title="",t.toManTag="",t.dynamicTags=[],t.keyword="",t.centerDialogVisible=!1,t.message=t.$message.success(e.data.data.msg)):t.message=t.$message.error(e.data.data.msg)}):this.message=this.$message.error("请完善数据")}},computed:Object(n["a"])({},Object(c["b"])({user:function(t){return t.message.user},existUser:function(t){return t.message.existUser},uid:function(t){return t.request.uid}}),{headImage:function(){return"".concat(l["a"].sq).concat(this.user.headImage)}}),created:function(){this.checkLogin()}},u=d,m=(a("da0e"),a("2877")),h=Object(m["a"])(u,i,s,!1,null,"33193219",null);e["a"]=h.exports},"09a0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header"),a("div",{staticClass:"index_box"},[a("div",{staticClass:"index_left"}),a("div",{staticClass:"index_right"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("论坛公告")]),a("el-button",{staticStyle:{float:"right",padding:"0.1875rem 0"},attrs:{type:"text",icon:"el-icon-more-outline"}})],1),a("div",{staticClass:"notice"},t._l(t.notices,function(e,i){return a("div",{key:i,staticClass:"text item"},[a("router-link",{staticClass:"notice_title",attrs:{to:{name:"PublicCommunity",params:{aid:0,pid:e.pid}}}},[a("strong",[t._v("【系统公告】"+t._s(e.title))])]),a("a",[a("small",[t._v(t._s(e.date))])])],1)}),0)])],1)]),a("div",{staticClass:"button_box"},[t._m(0),a("div",{staticClass:"community",on:{click:t.toPublic}},[t._m(1)])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"enter"},[a("span",[t._v("进入")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","line-height":"2.2","justify-content":"space-around"}},[a("span",[t._v("交流社区")]),a("span",{staticStyle:{width:"105px",display:"flex",overflow:"hidden"}},[a("i",{staticClass:"move ar-animated ar-delay-4s el-icon-arrow-right"}),a("i",{staticClass:"move ar-animated ar-delay-3s el-icon-arrow-right"}),a("i",{staticClass:"move ar-animated ar-delay-2s el-icon-arrow-right"}),a("i",{staticClass:"move ar-animated ar-delay-1s el-icon-arrow-right"}),a("i",{staticClass:"move ar-animated el-icon-arrow-right"})])])}],n=a("0418"),o=(a("e988"),{name:"Index",data:function(){return{notices:[]}},components:{Header:n["a"]},methods:{toPublic:function(){this.$router.push({path:"/public"})}},beforeMount:function(){var t=this;this.$api.getSimpleNotice().then(function(e){e.data.data.code>0&&(t.notices=e.data.data.notice)})}}),r=o,c=(a("d937"),a("2877")),l=Object(c["a"])(r,i,s,!1,null,"49ac3924",null);e["default"]=l.exports},"0cd8":function(t,e,a){"use strict";var i=a("5ca1"),s=a("7b23");i(i.P+i.F*!a("2f21")([].reduce,!0),"Array",{reduce:function(t){return s(this,t,arguments.length,arguments[1],!1)}})},"7b23":function(t,e,a){var i=a("d8e8"),s=a("4bf8"),n=a("626a"),o=a("9def");t.exports=function(t,e,a,r,c){i(e);var l=s(t),d=n(l),u=o(l.length),m=c?u-1:0,h=c?-1:1;if(a<2)for(;;){if(m in d){r=d[m],m+=h;break}if(m+=h,c?m<0:u<=m)throw TypeError("Reduce of empty array with no initial value")}for(;c?m>=0:u>m;m+=h)m in d&&(r=e(r,d[m],m,l));return r}},d937:function(t,e,a){"use strict";var i=a("dbf9"),s=a.n(i);s.a},da0e:function(t,e,a){"use strict";var i=a("e4a8"),s=a.n(i);s.a},dbf9:function(t,e,a){},e4a8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-e8c3597a.a1d987f8.js.map